<!-- Step 4: Introduce multiple targets -->
<project name="app2" default="build">
    <!-- project-specific properties -->
    <property name="project.name" value="Main" />

    <!-- derived project properties -->
    <property name="project.swf" value="${project.name}.swf" />
    <property name="project.swc" value="${project.name}.swc" />
    <property name="project.flex2.application" value="${project.name}.mxml" />

    <!-- system properties -->
    <property name="flex2.dir" value="c:/flex/flex2.0.1/sdk" />
    <property name="flex2.frameworks.dir" value="${flex2.dir}/frameworks" />
    <property name="flex2.dist.lib" value="${flex2.dir}/lib" />
    <property name="flex2.compc.jar" value="${flex2.dist.lib}/compc.jar" />
    <property name="flex2.mxmlc.jar" value="${flex2.dist.lib}/mxmlc.jar" />

    <!-- targets -->
    <target name="build" depends="flex2-application" description="Build the application" />

    <target name="flex2-application" description="Compile the application">
        <!-- copy all non-source files -->
        <copy todir="build" includeEmptyDirs="false">
            <fileset dir="flex2">
                <exclude name="**/*.as" />
                <exclude name="**/*.mxml" />
            </fileset>
        </copy>

        <!-- invoke MXMLC -->
        <java jar="${flex2.mxmlc.jar}" dir="." fork="true" failonerror="true">
            <jvmarg value="-Xmx512m" />

            <!-- root of Flex SDK frameworks directory -->
            <arg value="+flexlib=${flex2.frameworks.dir}" />

            <!-- find associated sources in the flex2 directory -->
            <arg value="-source-path=flex2" />
            <arg value="-file-specs=flex2/${project.flex2.application}" />
            <arg value="-output=build/${project.swf}" />
        </java>
    </target>

    <target name="clean" description="Clean the project">
        <delete dir="build" />
    </target>
</project>
